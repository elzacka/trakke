<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tr√•kke - Bykle og Valle</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <!-- Google Fonts: Exo 2 -->
    <link href="https://fonts.googleapis.com/css2?family=Exo+2&display=swap" rel="stylesheet">
    
    <style>
        body {
            margin: 0;
            font-family: 'Exo 2', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f5f5;
        }

        .header {
            background: linear-gradient(135deg, #19461A, #486A47);
            color: white;
            padding: 1rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            margin: 0;
            font-size: 1.8rem;
        }
        
        .header p {
            margin: 0.5rem 0 0 0;
            opacity: 0.9;
        }
        
        .container {
            display: flex;
            height: calc(100vh - 100px);
        }
        
        .sidebar {
            width: 300px;
            background: white;
            padding: 1rem;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
            overflow-y: auto;
        }
        
        .filter-section {
            margin-bottom: 1.5rem;
        }
        
        .filter-section h3 {
            margin: 0 0 0.5rem 0;
            color: #2c5530;
            font-size: 1.1rem;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .filter-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.3rem;
            border-radius: 4px;
            transition: background-color 0.2s;
        }
        
        .filter-item:hover {
            background-color: #f0f8f0;
        }
        
        .filter-item input[type="checkbox"] {
            width: 16px;
            height: 16px;
        }
        
        .filter-item label {
            cursor: pointer;
            flex: 1;
        }
        
        .icon-preview {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }
        
        #map {
            flex: 1;
            border-radius: 8px;
            margin: 1rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .legend {
            background: white;
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .legend h4 {
            margin: 0 0 0.5rem 0;
            color: #2c5530;
        }
        
        .stats {
            background: #e8f5e8;
            padding: 0.8rem;
            border-radius: 6px;
            margin-top: 1rem;
        }
        
        .stats p {
            margin: 0;
            font-size: 0.9rem;
            color: #2c5530;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üèîÔ∏è Tr√•kke</h1>
        <p>Oppdag Bykle og Valle med turskoa p√•</p>
    </div>
    
    <div class="container">
        <div class="sidebar">
            <div class="filter-section">
                <h3>üó∫Ô∏è Filtrer innhold</h3>
                <div class="filter-group">
                    <div class="filter-item">
                        <input type="checkbox" id="hiking" checked>
                        <div class="icon-preview" style="background-color: #8B4513; color: white;">ü•æ</div>
                        <label for="hiking">Vandreruter</label>
                    </div>
                    <div class="filter-item">
                        <input type="checkbox" id="swimming" checked>
                        <div class="icon-preview" style="background-color: #4169E1; color: white;">üèä</div>
                        <label for="swimming">Badesteder</label>
                    </div>
                    <div class="filter-item">
                        <input type="checkbox" id="camping" checked>
                        <div class="icon-preview" style="background-color: #228B22; color: white;">‚õ∫</div>
                        <label for="camping">Camping/overnatting</label>
                    </div>
                    <div class="filter-item">
                        <input type="checkbox" id="waterfalls" checked>
                        <div class="icon-preview" style="background-color: #20B2AA; color: white;">üíß</div>
                        <label for="waterfalls">Fosser</label>
                    </div>
                    <div class="filter-item">
                        <input type="checkbox" id="viewpoints" checked>
                        <div class="icon-preview" style="background-color: #FF6347; color: white;">üî≠</div>
                        <label for="viewpoints">Utsiktspunkter</label>
                    </div>
                    <div class="filter-item">
                        <input type="checkbox" id="history" checked>
                        <div class="icon-preview" style="background-color: #8B4B8B; color: white;">üèõÔ∏è</div>
                        <label for="history">Historiske steder</label>
                    </div>
                </div>
            </div>
            
            <div class="legend">
                <h4>‚ÑπÔ∏è Informasjon</h4>
                <p>Klikk p√• mark√∏rene for mer informasjon om hvert sted. Du kan zoome og dra kartet for √• utforske omr√•det.</p>
            </div>
            
            <div class="stats">
                <p><strong>Synlige punkter:</strong> <span id="visible-count">0</span></p>
                <p><strong>Totalt i omr√•det:</strong> <span id="total-count">0</span></p>
            </div>
        </div>
        
        <div id="map"></div>
    </div>

    <!-- Leaflet JavaScript -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <script>
        // Initialis√©r kartet sentrert p√• Bykle/Valle-omr√•det
        const map = L.map('map').setView([59.4, 7.4], 10);

        // Legg til OpenStreetMap tiles
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '¬© OpenStreetMap contributors',
            maxZoom: 18
        }).addTo(map);

        // Eksempeldata for omr√•det (du kan senere hente disse fra API-er)
        const poiData = [
            {
                type: 'hiking',
                name: 'Reinevasstind (1404 moh)',
                lat: 59.4892,
                lng: 7.1845,
                description: 'Spektakul√¶r tur til h√∏yeste punkt i Valle. Ca. 6 timer tur/retur.',
                difficulty: 'Krevende'
            },
            {
                type: 'swimming',
                name: 'Byglandsfjord badeplass',
                lat: 59.1234,
                lng: 7.8123,
                description: 'Fin badeplass ved fjorden med gressareal og brygger.',
                facilities: 'Toalett, parkering'
            },
            {
                type: 'camping',
                name: 'Hovden camping',
                lat: 59.5456,
                lng: 7.3456,
                description: 'Familievennlig camping ved foten av Hovdenfjell.',
                services: 'Hytte, teltplass, str√∏m'
            },
            {
                type: 'waterfalls',
                name: 'Rjukandefossen',
                lat: 59.3789,
                lng: 7.2789,
                description: '182 meter h√∏y foss - en av Norges h√∏yeste.',
                season: 'Best fra mai til oktober'
            },
            {
                type: 'viewpoints',
                name: 'Hovdenfjell utsikt',
                lat: 59.5123,
                lng: 7.3234,
                description: 'Fantastisk utsikt over Setesdal og mot kysten.',
                elevation: '1200 moh'
            },
            {
                type: 'history',
                name: 'Rygnestad stavkirke',
                lat: 59.1567,
                lng: 7.7890,
                description: 'Middelalderkirke fra 1100-tallet, en av f√• bevarte stavkirker.',
                period: 'Middelalder'
            },
            {
                type: 'hiking',
                name: 'Steindalstind',
                lat: 59.2345,
                lng: 7.5678,
                description: 'Popul√¶r dagstur med flott utsikt over Byglandsfjorden.',
                difficulty: 'Middels'
            },
            {
                type: 'swimming',
                name: '√Öraksb√∏vatnet',
                lat: 59.4567,
                lng: 7.1234,
                description: 'Idyllisk fjelltjern perfekt for et forfriskende bad.',
                temperature: 'Kaldt, 12-16¬∞C om sommeren'
            }
        ];

        // Ikoner for forskjellige typer POI
        const iconConfig = {
            hiking: { color: '#8B4513', icon: 'ü•æ' },
            swimming: { color: '#4169E1', icon: 'üèä' },
            camping: { color: '#228B22', icon: '‚õ∫' },
            waterfalls: { color: '#20B2AA', icon: 'üíß' },
            viewpoints: { color: '#FF6347', icon: 'üî≠' },
            history: { color: '#8B4B8B', icon: 'üèõÔ∏è' }
        };

        // Funksjon for √• lage egendefinerte ikoner
        function createCustomIcon(type) {
            const config = iconConfig[type];
            return L.divIcon({
                html: `<div style="
                    background-color: ${config.color};
                    width: 30px;
                    height: 30px;
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: white;
                    font-size: 14px;
                    border: 2px solid white;
                    box-shadow: 0 2px 5px rgba(0,0,0,0.3);
                ">${config.icon}</div>`,
                className: 'custom-div-icon',
                iconSize: [30, 30],
                iconAnchor: [15, 15]
            });
        }

        // Layer groups for hver kategori
        const layerGroups = {};
        Object.keys(iconConfig).forEach(type => {
            layerGroups[type] = L.layerGroup().addTo(map);
        });

        // Legg til mark√∏rer p√• kartet
        function addMarkers() {
            poiData.forEach(poi => {
                const marker = L.marker([poi.lat, poi.lng], {
                    icon: createCustomIcon(poi.type)
                });

                // Lag popup med informasjon
                let popupContent = `
                    <div style="min-width: 200px;">
                        <h3 style="margin: 0 0 10px 0; color: ${iconConfig[poi.type].color};">
                            ${iconConfig[poi.type].icon} ${poi.name}
                        </h3>
                        <p style="margin: 5px 0;">${poi.description}</p>
                `;

                // Legg til ekstra informasjon basert p√• type
                if (poi.difficulty) popupContent += `<p><strong>Vanskelighetsgrad:</strong> ${poi.difficulty}</p>`;
                if (poi.facilities) popupContent += `<p><strong>Fasiliteter:</strong> ${poi.facilities}</p>`;
                if (poi.services) popupContent += `<p><strong>Tjenester:</strong> ${poi.services}</p>`;
                if (poi.season) popupContent += `<p><strong>Sesong:</strong> ${poi.season}</p>`;
                if (poi.elevation) popupContent += `<p><strong>H√∏yde:</strong> ${poi.elevation}</p>`;
                if (poi.period) popupContent += `<p><strong>Periode:</strong> ${poi.period}</p>`;
                if (poi.temperature) popupContent += `<p><strong>Temperatur:</strong> ${poi.temperature}</p>`;

                popupContent += `</div>`;

                marker.bindPopup(popupContent);
                layerGroups[poi.type].addLayer(marker);
            });
        }

        // Funksjon for √• oppdatere statistikk
        function updateStats() {
            let visibleCount = 0;
            Object.keys(layerGroups).forEach(type => {
                if (map.hasLayer(layerGroups[type])) {
                    visibleCount += Object.keys(layerGroups[type]._layers).length;
                }
            });
            
            document.getElementById('visible-count').textContent = visibleCount;
            document.getElementById('total-count').textContent = poiData.length;
        }

        // Event listeners for filtrering
        function setupFilters() {
            Object.keys(iconConfig).forEach(type => {
                const checkbox = document.getElementById(type);
                checkbox.addEventListener('change', function() {
                    if (this.checked) {
                        map.addLayer(layerGroups[type]);
                    } else {
                        map.removeLayer(layerGroups[type]);
                    }
                    updateStats();
                });
            });
        }

        // Initialiser appen
        addMarkers();
        setupFilters();
        updateStats();

        // Legg til en tilpasset kontroll for √• vise koordinater ved klikk
        map.on('click', function(e) {
            const lat = e.latlng.lat.toFixed(6);
            const lng = e.latlng.lng.toFixed(6);
            console.log(`Koordinater: ${lat}, ${lng}`);
        });
    </script>
</body>
</html>
